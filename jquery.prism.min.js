(function(a){a.fn.prism=function(){if(!this.length){return this}var g={};var e=Array.prototype.slice.call(arguments);if(e.length===1){if(a.isPlainObject(e[0])){g=e[0];g.w=g.w||g.width;g.h=g.h||g.height;g.d=g.d||g.depth;g.p=g.p||g.perspective||b.perspective}else{g={w:e[0],h:e[0],d:e[0]}}}else{if(e.length===3){g={w:e[0],h:e[1],d:e[2]}}}if(!g.sides){g.sides={}}if(!g.w||!g.h||!g.d){return this}if(this.find(".jquery-prism-shape").length){this.find(".jquery-prism-shape").remove()}this.css({position:this.css("position").replace(/static/,"")||"relative"});var c=a("<div>").addClass("jquery-prism-shape").css({"transform-style":"preserve-3d","-moz-transform-style":"preserve-3d","-webkit-transform-style":"preserve-3d",}).width(g.w).height(g.h).appendTo(this);var d="perspective("+g.p+"px)";["front","back","top","bottom","left","right"].forEach(function(l,k){var h=a("<div>").addClass("jquery-prism-"+l+" jquery-prism-side");h.css({background:g.sides[l]||g.sides.standard||b.background,position:"absolute",top:0,left:0});h.width((a.inArray(l,["left","right"])!==-1)?g.d:g.w);h.height((a.inArray(l,["top","bottom"])!==-1)?g.d:g.h);var j="";switch(l){case"back":j="translateZ(-"+g.d+"px)";break;case"top":j="translateZ(-"+(g.d/2)+"px) translateY(-"+(g.d/2)+"px) rotateX(90deg)";break;case"bottom":j="translateZ(-"+(g.d/2)+"px) translateY("+(g.h-(g.d/2))+"px) rotateX(90deg)";break;case"left":j="translateX(-"+(g.d/2)+"px) translateZ(-"+(g.d/2)+"px) rotateY(-90deg)";break;case"right":j="translateX("+(g.w-(g.d/2))+"px) translateZ(-"+(g.d/2)+"px) rotateY(90deg)";break}h.css({transform:j,"-o-transform":j,"-ms-transform":j,"-moz-transform":j,"-webkit-transform":j});h.appendTo(c)});if(g.transform){for(var f=0;f<g.transform.length;f++){d+=" ";a.each(g.transform[f],function(j,i){var h="";if(a.isNumeric(i)){while(!h){if(/(scale)/.test(j)){break}if(/(rotate|skew)/.test(j)){h="deg";break}h="px";break}}d+=j+"("+i+h+")"})}this.find(".jquery-prism-shape").css({transform:d,"-o-transform":d,"-ms-transform":d,"-moz-transform":d,"-webkit-transform":d})}return this};var b={background:function(){var f=100;var e=94+Math.round(Math.random()*f-(f/2));var d=152+Math.round(Math.random()*f-(f/2));var c=238+Math.round(Math.random()*f-(f/2));return"rgba("+e+", "+d+", "+c+", 0.44)"},perspective:500}})(jQuery);